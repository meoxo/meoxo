!function(a){"use strict";a(document).ready(function(){a(".banner-image").backstretch("/images/5e7588d3.banner.jpg"),a(window).scroll(function(){a(".header.fixed").length>0&&(a(this).scrollTop()>0&&a(window).width()>767?a("body").addClass("fixed-header-on"):a("body").removeClass("fixed-header-on"))}),a(window).load(function(){a(".header.fixed").length>0&&(a(this).scrollTop()>0&&a(window).width()>767?a("body").addClass("fixed-header-on"):a("body").removeClass("fixed-header-on"))}),a(".scrollspy").length>0&&(a("body").addClass("scroll-spy"),a("body").scrollspy({target:".scrollspy",offset:152})),a(".smooth-scroll").length>0&&a(".smooth-scroll a[href*=#]:not([href=#]), a[href*=#]:not([href=#]).smooth-scroll").click(function(){var b=Modernizr.mq("only all and (min-width: 768px)")?150:0;if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var c=a(this.hash);if(c=c.length?c:a("[name="+this.hash.slice(1)+"]"),c.length)return a("html,body").animate({scrollTop:c.offset().top-b},500),!1}}),a("[data-animation-effect]").length>0&&!Modernizr.touch&&a("[data-animation-effect]").each(function(){var b=a(this),c=b.attr("data-animation-effect");Modernizr.mq("only all and (min-width: 768px)")&&Modernizr.csstransitions?b.appear(function(){setTimeout(function(){b.addClass("animated object-visible "+c)},600)},{accX:0,accY:-130}):b.addClass("object-visible")})})}(this.jQuery),function(a){"use strict";var b=new Sailfish.App({publicAccessKey:"VXaPjwq5tQbWirJtCeqQ",privateAccessKey:"DiqRqMtGposOhkh50mWWqi23ComyYwTMIrC9Jvvx"}),c=b.collection("configuration"),d=b.collection("messages"),e=b.collection("portfolios"),f=b.collection("prizes"),g=b.collection("customers"),h=b.collection("about_us_list"),i=b.collection("about_us_dropdown_list"),j=b.collection("bloopers"),k=function(b,c,d){d||(d="text");var e=a("#"+b);"text"===d?e.text(c):"img"===d?e.attr("src",c):"phone"===d?(e.attr("href","tel:"+c),e.text(c)):"email"===d?(e.attr("href","mailto:"+c),e.text(c)):"html"===d&&e.html(c)};c.all(1,100).then(function(b){a.each(b,function(a,b){if("logo"===b.slug||"about-us-image"===b.slug){var c=b&&b.file&&b.file[0]&&b.file[0].url;return void k(b.slug,c,"img")}return"contact-us-phone"===b.slug?void k(b.slug,b.content,"phone"):"contact-us-email"===b.slug?void k(b.slug,b.content,"email"):void k(b.slug,b.content)})});var l=function(b){var c=function(a,b){var c="";return c="right"===b?'<div class="media"><div class="media-left"><i class="fa '+a.icon+'"></i></div><div class="media-body"><h4 class="media-heading">'+a.title+"</h4><p>"+a.content+"</p></div></div>":'<div class="media"><div class="media-body text-right"><h4 class="media-heading">'+a.title+"</h4><p>"+a.content+'</p></div><div class="media-right"><i class="fa '+a.icon+'"></i></div></div>'};a.each(b,function(b,d){b%2===0?a("#prizes-list-left").append(c(d,"left")):a("#prizes-list-right").append(c(d,"right"))})};f.all(1,500).then(l);var m=function(b){var c=function(a){var b=a&&a.icon&&a.icon[0]&&a.icon[0].url,c='<div class="col-xs-2"><div class="list-horizontal-item"><img src="'+b+'" alt="'+a.name+'"></div></div>';return c},d="";a.each(b,function(a,b){d+=c(b)}),a("#customers-list").html(d)};g.all(1,500).then(m);var n=function(b){var c=function(a){var b='<li><i class="fa fa-caret-right pr-10 text-colored"></i> '+a.item+"</li>";return b},d="";a.each(b,function(a,b){d+=c(b)}),a("#about-us-list-introduction").html(d)};h.all(1,500).then(n);var o=function(b){var c=function(a,b){var c="about-us-dropdown-item-"+a.id,d=b?"true":"false",e=b?"in":"",e=b?"in":"",f=b?"":"collapsed",g='<div class="panel panel-default"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a class="'+f+'" data-toggle="collapse" data-parent="#accordion" href="#'+c+'" aria-expanded="'+d+'" aria-controls="'+c+'">'+a.title+'</a></h4></div><div id="'+c+'" class="panel-collapse collapse '+e+'" role="tabpanel" aria-labelledby="headingOne"><div class="panel-body">'+a.content+"</div></div></div>";return g},d="";a.each(b,function(a,b){d+=c(b,0===a)}),a(".about-us-list-dropdown-introduction").html(d)};i.all(1,500).then(o);var p=function(){a(".contact-name").val(""),a(".contact-email").val(""),a(".contact-message").val(""),a(".contact-phone").val("")},q=function(){var b=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,c=a(".contact-name").val(),e=a(".contact-email").val(),f=a(".contact-message").val(),g=a(".contact-phone").val();if(!c)return alert("姓名不能为空");if(!e)return alert("邮箱不能为空");if(!f)return alert("留言内容不能为空");if(!g)return alert("请输入有效的手机或者座机, 以方便我们联系您");if(c.length<=1)return alert("请输入有效的姓名");if(!b.test(e))return alert("请输入有效的邮箱地址");if(f.length<4)return alert("求求你了, 多写点嘛~");if(g.length<7)return alert("请输入有效的手机或者座机, 以方便我们联系您");var h=new d.Entity;h.name=c,h.email=e,h.content=f,h.phone=g,h.save().then(function(a){alert("内容已发送, 我们会尽快联系您!"),p()},function(a){alert("咦，好像没有发送成功~, 请您重试下")})};a(".contact-form").on("submit",function(a){a.preventDefault(),q()}),String.prototype.classify=function(){return this.toLowerCase().replace(" ","-")};var r=function(b){var c=function(a){var b="portfolio-category-"+a.classify(),c='<li><a href="#" data-filter=".'+b+'">'+a+"</a></li>";return c},d='<li class="active"><a href="#" data-filter="*">All</a></li>';a.each(b,function(a,b){d+=c(b)}),a("#portfolio-categories").html(d)},s=function(){var b=null,c=function(){a(".isotope-container").fadeIn(),b=a(".isotope-container").isotope({itemSelector:".isotope-item",layoutMode:"masonry",transitionDuration:"0.6s",filter:"*"})};a(".isotope-container").length>0&&(a(window).load(function(){c()}),a(".filters").on("click","ul.nav li a",function(d){var e=a(this).attr("data-filter");return a(".filters").find("li.active").removeClass("active"),a(this).parent().addClass("active"),b||c(),b.isotope({filter:e}),!1})),a(".modal").length>0&&a(".modal").each(function(){a(".modal").prependTo("body")})},t=function(){a(".flowplayer").flowplayer({splash:!0}),a(".modal").on("hide.bs.modal",function(b){a.each(a(".flowplayer"),function(b,c){a(c).data("flowplayer").pause()})})},u=function(b){var c=function(b){var c=b&&b.poster&&b.poster[0]&&b.poster[0].url,d=b&&b.video&&b.video[0]&&b.video[0].url,e="portfolio-"+b.id,f=new Date(b.created_date);f=f.getFullYear().toString()+"年"+(f.getMonth()+1).toString()+"月"+f.getDate().toString()+"日";var g="";a.each(b.category,function(a,b){g+="portfolio-category-"+b.classify(),g+=" "});var h='<div class="col-sm-6 col-md-3 isotope-item '+g+'"><div class="image-box"><div class="overlay-container"><img src="'+c+'" alt=""><a class="overlay" data-toggle="modal" data-target="#'+e+'"><i class="fa fa-search-plus"></i><span>'+b.category.join(", ")+'</span></a></div><a class="btn btn-default btn-block" data-toggle="modal" data-target="#'+e+'">'+b.title+'</a></div><div class="modal fade" id="'+e+'" tabindex="-1" role="dialog" aria-labelledby="'+e+'-label" aria-hidden="true"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span></button><h4 class="modal-title" id="'+e+'-label">'+b.title+'</h4></div><div class="modal-body"><h3>发布于 '+f+'</h3><div class="row"><div class="col-md-4">'+b.description+'</div><div class="col-md-8"><div class="flowplayer" data-swf="/images/flowplayer.swf" data-ratio="0.4167" data-engine="html5"><video poster="'+c+'"><source type="video/mp4" src="'+d+'"></video></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-sm btn-default" data-dismiss="modal">关闭</button></div></div></div></div></div>';return h},d="";a.each(b,function(a,b){d+=c(b)}),a("#portfolios-list").html(d),s(),t()};e.search({page:1,per_page:500,distinct:"category"}).then(r),e.search({page:1,per_page:500,sort:{created_date:"asc"},query:{published:!0}}).then(u);var v=function(b){var c=function(a,b){var c=a&&a.picture&&a.picture[0]&&a.picture[0].url,d=new Date(a.date);d=d.getFullYear().toString()+"年"+(d.getMonth()+1).toString()+"月"+d.getDate().toString()+"日";var e=0===b?"active":"",f='<div class="item '+e+'"><img src="'+c+'" alt="'+a.client_name+'"><div class="carousel-caption"><h3 class="client-name white">'+a.client_name+'</h3><div class="date">拍摄于: '+d+'</div><div class="description">'+a.description+"</div></div></div>";return f},d=function(a){var b=0===a?"active":"";return'<li data-target="#carousel-generic" data-slide-to="'+a+'" class="'+b+'"></li>'},e="",f="";a.each(b,function(a,b){e+=c(b,a),f+=d(a)}),a(".bloopers-list").html(e),a(".carousel-indicators").html(f),a("#carousel-generic").swipe({swipeLeft:function(){a(this).carousel("next")},swipeRight:function(){a(this).carousel("prev")}})};j.all(1,500).then(v)}(this.jQuery);